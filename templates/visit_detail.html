{% extends "base.html" %}


{% block content %}


    <h1 class="p-8 text-3xl font-bold text-center">{{ title }}</h1>
 

    <div class="flex justify-center">
        <table class="table-fixed w-2/3 border">
            <tbody>
                <tr>
                    <td class="border p-2 font-bold">First Name</td>
                    <td class="border p-2">{{ patient.first_name }}</td>
                    <td class="border p-2 font-bold">Last Name</td>
                    <td class="border p-2">{{ patient.last_name }}</td>
                </tr>
    
                <tr>
                    <td class="border p-2 font-bold">Date of birth</td>
                    <td class="border p-2">{{ patient.date_of_birth|date:"d F Y" }}</td>
                    <td class="border p-2 font-bold">Contact number: </td>
                    <td class="border p-2">{{ patient.contact_number }}</td>
                </tr>
    
                <tr>
                    <td class="border p-2 font-bold">Insurance</td>
                    <td class="border p-2">{{ patient.is_insured|yesno:"Yes,No"  }}</td>
                    <td class="border p-2 font-bold">Insurance number</td>
                    <td class="border p-2">{{ patient.insurance }}</td>
                </tr>
                
                <tr>
                    <td class="border p-2 font-bold">Main symptom</td>
                    <td class="border p-2">{{ patient.visit.main_symptom }}</td>
                    <td class="border p-2 font-bold">Additional symptoms</td>
                    <td class="border p-2">{{ patient.visit.additional_symptoms }}</td>
                </tr>

                <tr>
                    <td class="border p-2 font-bold">Authorized Medical Contact</td>
                    <td class="border p-2">{{ patient.visit.consent }}</td>
                    <td class="border p-2 font-bold">Authorized Medical Contact phone number</td>
                    <td class="border p-2">{{ patient.visit.consent_contact_number }}</td>
                </tr>
    
                <tr>
                    <td class="border p-2 font-bold">Admitted on</td>
                    <td class="border p-2">{{ patient.visit.admitted_on|date:"F j, Y" }} {{ patient.visit.admitted_on|time:"H:i" }}</td>
                    <td class="border p-2 font-bold">Admitted by</td>
                    <td class="border p-2">{{ patient.visit.admitted_by.first_name }} {{ patient.visit.admitted_by.last_name }} | {{ patient.visit.admitted_by.get_profession_display }}</td>
                </tr>
           
    
                <tr>
                    <td class="border p-2 font-bold">Discharged</td>
                    <td class="border p-2">{{ patient.visit.is_discharged|yesno:"Yes,No"  }}</td>
                    <td class="border p-2 font-bold">Discharge on </td>
                    <td class="border p-2">{% if patient.visit.is_discharged %}{{ patient.visit.discharged_on }}{% endif %}</td>
                  
                </tr>
            </tbody>
        </table>

    </div>

        
            <div class="flex justify-center">
                <div class="flex items-center mt-8">
                    
                    <a href="{% url 'patient:page' patient.id %}" class="py-4 px-6 bg-zinc-800 rounded-xl text-white mr-3">Back</a>
                    <a href="{% url 'visit:update' patient.id visit.id %}" class="py-4 px-6 bg-zinc-500 rounded-xl text-white mr-3">Edit</a>
        
                    {% if not patient.visit.is_discharged %}
                        <form method="post" action="{% url 'visit:detail' patient.id visit.id %}">
                            {% csrf_token %}
                            <input type="hidden" name="action" value="discharge">
                            <button type="submit" class="py-4 px-6 bg-emerald-600 rounded-xl text-white">Discharge Patient</button>
                        </form>
                    {% else %}
                        <form method="post" action="{% url 'visit:detail' patient.id visit.id %}">
                            {% csrf_token %}
                            <input type="hidden" name="action" value="readmit">
                            <button type="submit" class="py-4 px-6 bg-emerald-600 rounded-xl text-white">Readmit Patient</button>
                        </form>
                    {% endif %}
                </div>
            </div>
    


{% endblock %}